(function(){"use strict";var e={6387:function(e,t,o){o.d(t,{h:function(){return u}});o(7658);var n=o(9669),a=o.n(n),r=o(9696);const i=a().create({baseURL:"https://tardigrade.ariadna.su/api",headers:{Accept:"application/json"}});i.interceptors.request.use((e=>(e.headers.common={...e.headers.common,Authorization:`Bearer ${r.Z.state.userAuthData.token}`},e)),(e=>Promise.reject(e))),i.interceptors.response.use((e=>e),(e=>{throw 401===e.response?.status&&r.Z.commit("killUser"),r.Z.commit("pushToTray",e.response.data.message||"Произошла непредвиденная ошибка"),e}));var s=i;async function u(e={},t={}){const o=JSON.parse(JSON.stringify(e));function n(e){return{frontendError:e}}function a(e=[],t={},o=!1){const n=new Set;e.forEach((e=>{n.add(e)}));const a=[];let r=Object.keys(t);return r.forEach((e=>{n.has(e)||a.push(e)})),o&&Object.values(t).forEach(((e,t)=>{"object"===typeof e&&a.push(r[t])})),!(a.length>0)||(console.error("Request builder error: obtained payload is invalid.",a),!1)}return new Promise(((e,r)=>{let i="";o.pagination&&o.queryKeys.push("page","per_page"),o.queryKeys?.length>0&&(a(o.queryKeys,t.queryPayload,!0)||r(n("Request builder error: query")),o.queryKeys.forEach((e=>{t.queryPayload&&t.queryPayload[e]&&(i+=`&${e}=${t.queryPayload[e]}`)})),i.length>0&&(i="?"+i.slice(1))),o.routerKeys?.length>0&&(a(o.routerKeys,t.routerPayload,!0)||r(n("Request builder error: router")),o.routerKeys.forEach((e=>{o.url=o.url.replace(`:{${e}}`,t.routerPayload[e])}))),a(o.jsonKeys,t.jsonPayload)||r(n("Request builder error: json"));let u={};!o.formDataWrapper&&o.jsonKeys&&(u=t.jsonPayload);let c={};o.formDataWrapper&&o.jsonKeys&&t.jsonPayload&&(c["Content-Type"]="multipart/form-data",u=new FormData,Object.keys(t.jsonPayload).forEach((e=>{u.append(e,t.jsonPayload[e])}))),s[o.type](o.url+i,u,c).then((t=>{e(t)})).catch((e=>{r(e)}))}))}},2974:function(e,t){t["Z"]={GETEvents:{url:"/events",type:"get"},GETDiscordLink:{url:"/login/discord",type:"get",queryKeys:["redirect_url"]},POSTCheckToken:{url:"/token/discord",type:"post",jsonKeys:["discordCode","redirect_url"]},POSTLogIn:{url:"/login",type:"post",jsonKeys:["typeAuth"]},GETCharacterList:{url:"/charactersList",type:"get"},POSTCreateCharacter:{url:"/createCharacter",type:"post",jsonKeys:["name","password","display_name"]},GETCharacterInfo:{url:"/characterInfo",type:"get",queryKeys:["characterName"]},GETAbility:{url:"/abilityInfo",type:"get",queryKeys:["abilityName","characterName"]},GETAbilityDefensive:{url:"/defAbilityInfo",type:"get",queryKeys:["abilityName","characterName"]},GETTrinket:{url:"/trinketInfo",type:"get",queryKeys:["trinketName","characterName"]},GETWearable:{url:"/wearableInfo",type:"get",queryKeys:["wearableName","characterName"]}}},2610:function(e,t,o){function n(){return(Math.random()+1).toString(36).substring(7)}o.d(t,{t:function(){return n}})},3773:function(e,t,o){var n=o(9963),a=o(6252);function r(e,t,o,n,r,i){const s=(0,a.up)("router-view"),u=(0,a.up)("PopupController"),c=(0,a.up)("Tray");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.$route.meta.layout),null,{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1})),(0,a.Wm)(u),(0,a.Wm)(c)],64)}const i={key:0,class:"desktop-layout"},s={class:"playground"},u={key:1,class:"desktop-layout"},c={class:"playground"};function l(e,t,o,n,r,l){const d=(0,a.up)("DesktopLabelSidebar"),p=(0,a.up)("CharacterSelectPanel");return e.$store.state.selectedCharacterName?((0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(d),(0,a._)("div",s,[(0,a.WI)(e.$slots,"default")])])):((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",c,[(0,a.Wm)(p)])]))}var d=o(3577),p="data:image/png;base64,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",m=o.p+"img/entity-app-label_mock.448905fa.png",h="data:image/png;base64,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";const A={class:"desktop-labels-sidebar"},f={class:"labels-column"},g=(0,a._)("img",{src:p},null,-1),y=(0,a._)("div",null,"Сущность",-1),v=(0,a._)("img",{src:m},null,-1),C=(0,a._)("div",null,"Редактор реальности",-1),w={class:"start-container"},b={key:0,class:"start-drop-panel panel"},k=(0,a.Uk)(" Смена пользователя "),D=(0,a.Uk)(" Выключение"),P=(0,a._)("img",{src:h},null,-1),I=[P];function T(e,t,o,n,r,i){const s=(0,a.up)("router-link"),u=(0,a.up)("Icon");return(0,a.wg)(),(0,a.iD)("div",A,[(0,a._)("div",f,[(0,a.Wm)(s,{to:{name:"Character"},class:"app-label"},{default:(0,a.w5)((()=>[g,y])),_:1}),(0,a.Wm)(s,{to:{name:"AdminPanel"},class:"app-label"},{default:(0,a.w5)((()=>[v,C])),_:1})]),(0,a._)("div",w,[r.isStartMenuShown?((0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("header",null,"Привет, "+(0,d.zw)(e.$store.state.selectedCharacterName),1),(0,a._)("div",{onClick:t[0]||(t[0]=(...e)=>i.changeCharacter&&i.changeCharacter(...e))},[(0,a.Wm)(u,{icon:"openmoji:counterclockwise-arrows-button"}),k]),(0,a._)("div",{onClick:t[1]||(t[1]=(...e)=>i.logOut&&i.logOut(...e))},[(0,a.Wm)(u,{icon:"openmoji:red-eye"}),D])])):(0,a.kq)("",!0),(0,a._)("div",{class:"start-button app-label",onClick:t[2]||(t[2]=e=>r.isStartMenuShown=!r.isStartMenuShown)},I)])])}o(7658);var S=o(6542),E={name:"DesktopLabelSidebar",components:{Icon:S.JO},data(){return{isStartMenuShown:!1}},methods:{changeCharacter(){this.$store.commit("dumbMutation",{field:"selectedCharacterName",value:void 0})},logOut(){this.$store.commit("dumbMutation",{field:"isAuthorized",value:!1}),this.$router.push({name:"Auth"})}}},O=o(3744);const j=(0,O.Z)(E,[["render",T]]);var L=j;const Z={class:"character-select-panel"},M=(0,a._)("header",null,"Выбор пользователя",-1),x={key:0,class:"character-list"},K=["onClick"],B={class:"name"},Q={key:1,class:"character-list_empty infosphere bordered"},z=(0,a._)("div",{class:"error"},"ОШИБКА: СУЩНОСТИ НЕ НАЙДЕНЫ",-1),R=[z];function G(e,t,o,n,r,i){const s=(0,a.up)("SkinFaceViewer"),u=(0,a.up)("CreateCharacterForm");return(0,a.wg)(),(0,a.iD)("div",Z,[M,r.charactersList.length>0?((0,a.wg)(),(0,a.iD)("div",x,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.charactersList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"character",key:t,onClick:t=>i.selectCharacter(e.name)},[(0,a.Wm)(s,{class:"bordered face","skin-link":e.skin},null,8,["skin-link"]),(0,a._)("div",B,(0,d.zw)(e.display_name),1)],8,K)))),128))])):((0,a.wg)(),(0,a.iD)("div",Q,R)),(0,a._)("div",{class:(0,d.C_)(["character-create-container",{panel:r.isCreateCharacterForm}])},[r.isCreateCharacterForm?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>r.isCreateCharacterForm=!0)}," Проявить сущность ")),r.isCreateCharacterForm?((0,a.wg)(),(0,a.j4)(u,{key:2,onCreationCompleted:t[2]||(t[2]=()=>{this.isCreateCharacterForm=!1,this.loadCharacters()})})):((0,a.wg)(),(0,a.iD)("button",{key:1,class:"ms-2",onClick:t[1]||(t[1]=e=>i.logOut())}," Завершение работы "))],2)])}function F(e,t,o,n,r,i){return(0,a.wg)(),(0,a.iD)("div",{class:"mc-face-viewer-8x",style:(0,d.j5)({backgroundImage:i.skinCSSProp})},null,4)}var N={name:"SkinFaceViewer",props:{skinLink:{type:String,default:""}},computed:{skinCSSProp(){return`url("${this.skinLink}")`}}};const U=(0,O.Z)(N,[["render",F]]);var Y=U,W=o(6387),_=o(2974);const q={class:"panel create-character p-2"},H={class:"row"},J={class:"col"},V={class:"field-row-stacked"},X=(0,a._)("label",null,"Имя сущности",-1),$={class:"field-row-stacked"},ee=(0,a._)("label",null,"Имя личности",-1),te={class:"col"},oe={class:"field-row-stacked"},ne=(0,a._)("label",null,"Пароль",-1),ae={class:"field-row-stacked"},re=(0,a._)("label",null,"Повторите пароль",-1),ie=["disabled"];function se(e,t,o,r,i,s){return(0,a.wg)(),(0,a.iD)("div",q,[(0,a._)("div",H,[(0,a._)("div",J,[(0,a._)("div",V,[X,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Marduk","onUpdate:modelValue":t[0]||(t[0]=e=>i.formData.name=e)},null,512),[[n.nr,i.formData.name]])]),(0,a._)("div",$,[ee,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Мардук","onUpdate:modelValue":t[1]||(t[1]=e=>i.formData.display_name=e)},null,512),[[n.nr,i.formData.display_name]])])]),(0,a._)("div",te,[(0,a._)("div",oe,[ne,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.formData.password=e)},null,512),[[n.nr,i.formData.password]])]),(0,a._)("div",ae,[re,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>i.passwordConfirm=e)},null,512),[[n.nr,i.passwordConfirm]])])])]),(0,a._)("button",{class:"mt-2",disabled:!s.isCanProceed,onClick:t[4]||(t[4]=(...e)=>s.handleSubmit&&s.handleSubmit(...e))}," Завершить ",8,ie)])}var ue={name:"CreateCharacterForm",data(){return{formData:{name:"",password:"",display_name:""},passwordConfirm:""}},emits:["creation-completed"],computed:{isCanProceed(){return this.formData.name&&this.formData.password&&this.formData.display_name&&this.passwordConfirm}},methods:{handleSubmit(){this.isCanProceed&&(this.formData.password===this.passwordConfirm?(0,W.h)(_.Z.POSTCreateCharacter,{jsonPayload:this.formData}).then((()=>{this.$store.commit("pushToTray","Сущность успешно проявлена."),this.$emit("creation-completed")})).catch((()=>{this.$store.commit("pushToTray","Что-то пошло не так")})):this.$store.commit("pushToTray","Пароль и подтверждение пароля не совпадают."))}}};const ce=(0,O.Z)(ue,[["render",se]]);var le=ce,de={name:"CharacterSelectPanel",components:{CreateCharacterForm:le,SkinFaceViewer:Y},data(){return{charactersList:[],isCreateCharacterForm:!1}},beforeMount(){this.loadCharacters()},methods:{loadCharacters(){(0,W.h)(_.Z.GETCharacterList).then((e=>{this.charactersList=e.data}))},selectCharacter(e){this.$store.commit("dumbMutation",{field:"selectedCharacterName",value:e})},logOut(){this.$store.commit("dumbMutation",{field:"isAuthorized",value:!1}),this.$router.push({name:"Auth"})}}};const pe=(0,O.Z)(de,[["render",G]]);var me=pe,he={name:"DesktopLayout",components:{CharacterSelectPanel:me,DesktopLabelSidebar:L}};const Ae=(0,O.Z)(he,[["render",l]]);var fe=Ae;const ge={class:"dos-layout infosphere"},ye=(0,a._)("div",{class:"logo"},[(0,a._)("div",{class:"main-text"},"Snack OS"),(0,a._)("div",{class:"sub-text"},[(0,a.Uk)("powered by "),(0,a._)("span",null,"infosphere")])],-1);function ve(e,t,o,n,r,i){return(0,a.wg)(),(0,a.iD)("div",ge,[ye,(0,a.WI)(e.$slots,"default")])}var Ce={name:"DOSLayout"};const we=(0,O.Z)(Ce,[["render",ve]]);var be=we;const ke={class:"tray"};function De(e,t,o,n,r,i){const s=(0,a.up)("TrayItem");return(0,a.wg)(),(0,a.iD)("div",ke,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.$store.state.trayItems,((e,t)=>((0,a.wg)(),(0,a.j4)(s,{key:t,itemData:e},null,8,["itemData"])))),128))])}const Pe={class:"tray-item"},Ie={class:"icon"};function Te(e,t,o,n,r,i){const s=(0,a.up)("Icon");return(0,a.wg)(),(0,a.iD)("div",Pe,[(0,a._)("div",Ie,[(0,a.Wm)(s,{icon:"flat-color-icons:advertising"})]),(0,a._)("div",null,(0,d.zw)(o.itemData.text),1)])}var Se={name:"TrayItem",components:{Icon:S.JO},data(){return{timeout:null}},props:{itemData:{type:Object}},mounted(){this.timeout=setTimeout((()=>this.$store.commit("removeFromTray",this.itemData.id)),4e3)}};const Ee=(0,O.Z)(Se,[["render",Te]]);var Oe=Ee,je={name:"Tray",components:{TrayItem:Oe}};const Le=(0,O.Z)(je,[["render",De]]);var Ze=Le;function Me(e,t,o,n,r,i){const s=(0,a.up)("PopupShell");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.$store.state.activePopups,(e=>((0,a.wg)(),(0,a.j4)(s,{key:e.id,"popup-data":e},null,8,["popup-data"])))),128)}function xe(e,t,o,n,r,i){const s=(0,a.up)("Window");return(0,a.wg)(),(0,a.iD)("div",{class:"popup-shell",ref:"popupContainer",style:(0,d.j5)({left:r.popupPosition.x+"px",top:r.popupPosition.y+"px"})},[(0,a.Wm)(s,{title:o.popupData.title,"show-button-close":!0,"is-draggable":!0,onCloseClick:i.closePopup,onMousedownOnTitle:t[0]||(t[0]=()=>{this.isPopupDragging=!0}),onMouseupOnTitle:t[1]||(t[1]=()=>{this.isPopupDragging=!1}),onMousemoveOnTitle:i.dragPopup,onMouseout:t[2]||(t[2]=()=>{this.isPopupDragging=!1})},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(o.popupData.component),{popupData:o.popupData},null,8,["popupData"]))])),_:1},8,["title","onCloseClick","onMousemoveOnTitle"])],4)}var Ke=o(9973),Be={name:"PopupShell",components:{Window:Ke.Z,ItemPopup:(0,a.RC)((()=>o.e(240).then(o.bind(o,240)))),AbilityPopup:(0,a.RC)((()=>o.e(264).then(o.bind(o,5264))))},props:{popupData:{type:Object}},data(){return{isPopupDragging:!1,popupPosition:{x:0,y:0}}},computed:{containerSize(){return{height:Math.max(this.$refs.popupContainer.offsetHeight,300),width:Math.max(this.$refs.popupContainer.offsetWidth,500)}}},methods:{closePopup(){this.$store.commit("removePopup",this.popupData.id)},dragPopup(e){this.isPopupDragging&&(this.popupPosition.x+=e.movementX,this.popupPosition.y+=e.movementY)}},mounted(){const e=10*this.$store.state.activePopups.length;this.popupPosition={x:window.innerWidth/2-this.containerSize.width/2+e,y:window.innerHeight/2-this.containerSize.height/2+e}}};const Qe=(0,O.Z)(Be,[["render",xe]]);var ze=Qe,Re={name:"PopupController",components:{PopupShell:ze}};const Ge=(0,O.Z)(Re,[["render",Me]]);var Fe=Ge,Ne={name:"App",components:{PopupController:Fe,Tray:Ze,DesktopLayout:fe,DOSLayout:be}};const Ue=(0,O.Z)(Ne,[["render",r]]);var Ye=Ue,We=o(2890),_e=o(9696),qe=o(73),He=o(4132);const Je=(0,n.ri)(Ye);Je.use(_e.Z).use(We.Z).use(He.ZP),Je.component("Icon",qe.JO),Je.mount("#app")},2890:function(e,t,o){o.d(t,{Z:function(){return w}});var n=o(2201),a=o(6252);const r={class:"home"};function i(e,t,o,n,i,s){return(0,a.wg)(),(0,a.iD)("div",r)}var s={name:"Home"},u=o(3744);const c=(0,u.Z)(s,[["render",i]]);var l=c;const d={class:"auth"};function p(e,t,o,n,r,i){return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",{class:"auth-button",onClick:t[0]||(t[0]=(...e)=>i.redirectToDiscordOAuth&&i.redirectToDiscordOAuth(...e))}," ИДЕНТИФИЦИРОВАТЬ ЛИЧНОСТЬ ")])}var m=o(6387),h=o(2974),A={name:"Auth",methods:{redirectToDiscordOAuth(){(0,m.h)(h.Z.GETDiscordLink,{queryPayload:{redirect_url:window.location.origin+"/"}}).then((e=>{window.location.href=e.data.url}))}}};const f=(0,u.Z)(A,[["render",p]]);var g=f,y=o(9696);const v=[{path:"/",name:"Home",component:l,meta:{layout:"DesktopLayout"}},{path:"/character",name:"Character",component:()=>o.e(794).then(o.bind(o,7624)),meta:{layout:"DesktopLayout"}},{path:"/admin",name:"AdminPanel",component:()=>o.e(794).then(o.bind(o,1755)),meta:{layout:"DesktopLayout"}},{path:"/auth",name:"Auth",component:g,meta:{layout:"DOSLayout",isPublic:!0}}],C=(0,n.p7)({history:(0,n.PO)(),routes:v});C.beforeEach((e=>{e.query.code&&y.Z.dispatch("userAuth",e.query.code)})),C.beforeEach(((e,t,o)=>{e.meta.isPublic||y.Z.state.isAuthorized?"Auth"===e.name&&y.Z.state.isAuthorized?o({name:"Home"}):o():o({name:"Auth"})}));var w=C},9696:function(e,t,o){o.d(t,{Z:function(){return v}});var n={};o.r(n),o.d(n,{userAuth:function(){return d}});var a={};o.r(a),o.d(a,{addPopup:function(){return g},dumbMutation:function(){return m},pushToTray:function(){return A},removeFromTray:function(){return f},removePopup:function(){return y},setUserAuthData:function(){return h}});var r=o(3907),i=o(4702),s=()=>({character:{},isInitialDataLoaded:!1,isAuthorized:!1,userAuthData:{},selectedCharacterName:"",trayItems:[],activePopups:[]}),u=(o(7658),o(6387)),c=o(2974),l=o(2890);function d({commit:e},t){return new Promise(((o,n)=>{(0,u.h)(c.Z.POSTCheckToken,{jsonPayload:{discordCode:t,redirect_url:window.location.origin+"/"}}).then((t=>{e("setUserAuthData",t.data),e("dumbMutation",{field:"isAuthorized",value:!0}),l.Z.push({name:"Home"}),o(t)})).catch((e=>{n(e)}))}))}var p=o(2610);function m(e,{field:t,value:o}){e[t]=o}function h(e,t){e.userAuthData=t}function A(e,t){e.trayItems.push({text:t,id:(0,p.t)()})}function f(e,t){let o=e.trayItems.findIndex((e=>e.id===t));e.trayItems.splice(o,1)}function g(e,t){e.activePopups.push({id:(0,p.t)(),component:t.component,title:t.title,params:t.params})}function y(e,t){let o=e.activePopups.findIndex((e=>e.id===t));e.activePopups.splice(o,1)}var v=(0,r.MT)({state:s,mutations:a,actions:n,modules:{},plugins:[(0,i.Z)({paths:["isAuthorized","userAuthData","selectedCharacterName"]})]})},9973:function(e,t,o){o.d(t,{Z:function(){return h}});var n=o(6252),a=o(3577);const r={class:"window"},i={class:"title-bar-text"},s={class:"title-bar-controls"},u={class:"window-body"};function c(e,t,o,c,l,d){const p=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",{class:(0,a.C_)(["title-bar",{draggable:o.isDraggable}]),onMousedown:t[3]||(t[3]=t=>e.$emit("mousedown-on-title")),onMouseup:t[4]||(t[4]=t=>e.$emit("mouseup-on-title")),onMousemove:t[5]||(t[5]=(...e)=>d.mouseMoveOnTitle&&d.mouseMoveOnTitle(...e))},[(0,n._)("div",i,[o.pageMode?((0,n.wg)(),(0,n.j4)(p,{key:0,icon:"noto-v1:pushpin"})):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,a.zw)(o.title),1)]),(0,n._)("div",s,[o.showButtonMinimize?((0,n.wg)(),(0,n.iD)("button",{key:0,"aria-label":"Minimize",onClick:t[0]||(t[0]=t=>e.$emit("minimize-click"))})):(0,n.kq)("",!0),o.showButtonMaximize?((0,n.wg)(),(0,n.iD)("button",{key:1,"aria-label":"Maximize",onClick:t[1]||(t[1]=t=>e.$emit("maximize-click"))})):(0,n.kq)("",!0),o.showButtonClose?((0,n.wg)(),(0,n.iD)("button",{key:2,"aria-label":"Close",onClick:t[2]||(t[2]=t=>e.$emit("close-click"))})):(0,n.kq)("",!0)])],34),(0,n._)("div",u,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])])}var l=o(6542),d={name:"Window",components:{Icon:l.JO},methods:{mouseMoveOnTitle(e){this.isDraggable&&this.$emit("mousemove-on-title",e)}},props:{title:{type:String,default:""},showButtonMinimize:{type:Boolean,default:!1},showButtonMaximize:{type:Boolean,default:!1},showButtonClose:{type:Boolean,default:!1},pageMode:{type:Boolean,default:!1},isDraggable:{type:Boolean,default:!1}}},p=o(3744);const m=(0,p.Z)(d,[["render",c],["__scopeId","data-v-5c01a956"]]);var h=m}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,r){if(!n){var i=1/0;for(l=0;l<e.length;l++){n=e[l][0],a=e[l][1],r=e[l][2];for(var s=!0,u=0;u<n.length;u++)(!1&r||i>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[u])}))?n.splice(u--,1):(s=!1,r<i&&(i=r));if(s){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,a,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+(794===e?"character":e)+"."+{240:"4765149a",264:"9fd283e3",794:"1de01042"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"css/"+(794===e?"character":e)+"."+{240:"68b5c0d5",264:"a53ce6b4",794:"e3885cc7"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="stargazer-front:";o.l=function(n,a,r,i){if(e[n])e[n].push(a);else{var s,u;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+r){s=d;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+r),s.src=n),e[n]=[a];var p=function(t,o){s.onerror=s.onload=null,clearTimeout(m);var a=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(o)})),t)return t(o)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,n,a){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var i=function(o){if(r.onerror=r.onload=null,"load"===o.type)n();else{var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=i,u.request=s,r.parentNode&&r.parentNode.removeChild(r),a(u)}};return r.onerror=r.onload=i,r.href=t,o?o.parentNode.insertBefore(r,o.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var a=o[n],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){a=i[n],r=a.getAttribute("data-href");if(r===e||r===t)return a}},n=function(n){return new Promise((function(a,r){var i=o.miniCssF(n),s=o.p+i;if(t(i,s))return a();e(n,s,null,a,r)}))},a={143:0};o.f.miniCss=function(e,t){var o={240:1,264:1,794:1};a[e]?t.push(a[e]):0!==a[e]&&o[e]&&t.push(a[e]=n(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){var e={143:0};o.f.j=function(t,n){var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise((function(o,n){a=e[t]=[o,n]}));n.push(a[2]=r);var i=o.p+o.u(t),s=new Error,u=function(n){if(o.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,a[1](s)}};o.l(i,u,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,i=n[0],s=n[1],u=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(u)var l=u(o)}for(t&&t(n);c<i.length;c++)r=i[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(l)},n=self["webpackChunkstargazer_front"]=self["webpackChunkstargazer_front"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(3773)}));n=o.O(n)})();
//# sourceMappingURL=app.57b80827.js.map