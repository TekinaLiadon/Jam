{"version":3,"sources":["webpack:///./src/views/Login.vue","webpack:///./src/api/backend.js","webpack:///./src/views/Login.vue?50b2"],"names":["_createBlock","_component_AuthForm","info","$data","username","$event","password","onFinish","$options","_createVNode","_component_Button","onClick","style","$router","push","backend","axios","create","baseURL","timeout","headers","Accept","interceptors","request","use","config","common","Authorization","store","state","userToken","error","Promise","reject","response","name","components","AuthForm","Button","data","btn","formData","methods","login","method","url","this","then","console","log","$store","commit","token","catch","discordLogin","__exports__","render"],"mappings":"8JAO6D,W,iBACqB,e,8GAP9EA,eAQWC,EAAA,CAPNC,KAAMC,OACCC,SAAUD,WAASC,S,mCAATD,WAASC,SAAQC,GAC3BC,SAAUH,WAASG,S,mCAATH,WAASG,SAAQD,GAClCE,SAAQC,SAJb,C,uBAME,IAAuE,CAAvEC,eAAuEC,EAAA,CAA9DC,QAAOH,eAAcI,MAAA,uBAA9B,C,uBAAuD,IAAO,K,KAA9D,eACAH,eAAgGC,EAAA,CAAvFC,QAAK,oBAAOE,QAAQC,KAAI,iBAAkBF,MAAA,uBAAnD,C,uBAA4E,IAAW,K,aAPzF,6C,qCCEJ,MAAMG,EAAUC,IAAMC,OAAO,CAC3BC,QAAU,4BACVC,QAAS,IACTC,QAAS,CACPC,OAAQ,sBAIZN,EAAQO,aAAaC,QAAQC,IAC1BC,IACCA,EAAOL,QAAQM,OAAS,IACnBD,EAAOL,QAAQM,OAClBC,cAAgB,UAASC,OAAMC,MAAMC,WAEhCL,GAERM,GACQC,QAAQC,OAAOF,IAI1BhB,EAAQO,aAAaY,SAASV,IAC3BU,GACQA,GAQInB,Q,wBDhBA,GACboB,KAAM,QACNC,WAAY,CAAEC,gBAAUC,eACxBC,OACE,MAAO,CACLrC,KAAM,CACJE,SAAU,QACVE,SAAU,SACVkC,IAAK,SAEPC,SAAU,CACRrC,SAAU,GACVE,SAAU,MAIhBoC,QAAS,CACPC,QAGE5B,EAAQ,CACN6B,OAAQ,OACRC,IAAK,QACLN,KAAMO,KAAKL,WAERM,KAAMb,IACLc,QAAQC,IAAIf,EAASK,MACrBO,KAAKI,OAAOC,OAAO,eAAgBjB,EAASK,KAAKa,OACjDN,KAAKjC,QAAQC,KAAK,CAACqB,KAAM,WAE1BkB,MAAOtB,IACNiB,QAAQC,IAAIlB,MAGpBuB,eACEvC,EAAQ,CACN6B,OAAQ,OACRC,IAAK,iBACLN,KAAMO,KAAKL,WACVM,KAAMb,IACPc,QAAQC,IAAIf,KAETmB,MAAOtB,IACNiB,QAAQC,IAAIlB,Q,qBExDxB,MAAMwB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d2086b7.73586c22.js","sourcesContent":["<template>\r\n    <AuthForm\r\n        :info=\"info\"\r\n        v-model:username=\"formData.username\"\r\n        v-model:password=\"formData.password\"\r\n        @finish=\"login\"\r\n    >\r\n      <Button @click=\"discordLogin\" style=\"margin-top: 10px\">Дискорд</Button>\r\n      <Button @click=\"this.$router.push('registration')\" style=\"margin-top: 10px\">Регистрация</Button>\r\n    </AuthForm>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport backend from \"../api/backend\";\r\nimport AuthForm from \"../components/ui/AuthForm\";\r\nimport Button from 'primevue/button';\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components: { AuthForm, Button,},\r\n  data() {\r\n    return {\r\n      info: {\r\n        username: 'Логин',\r\n        password: 'Пароль',\r\n        btn: 'Войти',\r\n      },\r\n      formData: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    login() {\r\n      // this.$store.commit('setUserToken', 'a')\r\n      // this.$store.commit('killUser')\r\n      backend({\r\n        method: 'post',\r\n        url: '/auth',\r\n        data: this.formData,\r\n      })\r\n          .then((response) => {\r\n            console.log(response.data);\r\n            this.$store.commit('setUserToken', response.data.token)\r\n            this.$router.push({name: 'Home'})\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n    },\r\n    discordLogin() {\r\n      backend({\r\n        method: 'post',\r\n        url: '/login/discord',\r\n        data: this.formData,\r\n      }).then((response) => {\r\n        console.log(response);\r\n      })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n</style>\r\n","import axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nconst backend = axios.create({\r\n  baseURL: `http://localhost:3000/api`,\r\n  timeout: 20000,\r\n  headers: {\r\n    Accept: \"application/json\",\r\n  },\r\n});\r\n\r\nbackend.interceptors.request.use(\r\n  (config) => {\r\n    config.headers.common = {\r\n      ...config.headers.common,\r\n      Authorization: `Bearer ${store.state.userToken}`,\r\n    };\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nbackend.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  /*(error) => {\r\n    if (error.response.status === 401) store.commit(\"user/killUser\");\r\n    throw error;\r\n  }*/\r\n);\r\n\r\nexport default backend;\r\n","import { render } from \"./Login.vue?vue&type=template&id=24b77c4f\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Project\\\\Ariadna\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}