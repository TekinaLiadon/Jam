{"version":3,"sources":["webpack:///./src/views/Login.vue","webpack:///./src/api/backend.js","webpack:///./src/views/Login.vue?a459","webpack:///./src/views/Login.vue?4918"],"names":["class","_createBlock","_component_Layout","_createElementVNode","_createVNode","_component_InputWrap","label","type","$data","username","$event","password","_component_Button","onClick","$options","backend","axios","create","baseURL","timeout","headers","Accept","interceptors","request","use","config","common","Authorization","store","state","userToken","error","Promise","reject","response","status","commit","name","components","Button","InputWrap","Layout","data","formData","methods","login","method","url","this","then","console","log","$store","token","$router","push","catch","__exports__","render"],"mappings":"yKAESA,MAAM,S,GACJA,MAAM,qB,GAONA,MAAM,qB,iBAOY,S,0IAhB3BC,eAkBSC,EAAA,M,uBAjBP,IAgBM,CAhBNC,eAgBM,MAhBN,EAgBM,CAfJA,eAMM,MANN,EAMM,CALJC,eAIEC,EAAA,CAHEC,MAAM,QACNC,KAAK,Q,WACIC,WAASC,S,qCAATD,WAASC,SAAQC,IAH9B,yBAMFP,eAMM,MANN,EAMM,CALJC,eAIEC,EAAA,CAHEC,MAAM,WACNC,KAAK,W,WACIC,WAASG,S,qCAATH,WAASG,SAAQD,IAH9B,yBAMFN,eAAqCQ,EAAA,CAA5BC,QAAOC,SAAK,C,uBAAE,IAAK,K,KAA5B,mB,+ECdN,MAAMC,EAAUC,IAAMC,OAAO,CAC3BC,QAAU,wBACVC,QAAS,IACTC,QAAS,CACPC,OAAQ,sBAIZN,EAAQO,aAAaC,QAAQC,IAC1BC,IACCA,EAAOL,QAAQM,OAAS,IACnBD,EAAOL,QAAQM,OAClBC,cAAgB,UAASC,OAAMC,MAAMC,WAEhCL,GAERM,GACQC,QAAQC,OAAOF,IAI1BhB,EAAQO,aAAaY,SAASV,IAC3BU,GACQA,EAERH,IAEC,MAD8B,MAA1BA,EAAMG,SAASC,QAAgBP,OAAMQ,OAAO,iBAC1CL,IAIKhB,QDLA,GACbsB,KAAM,QACNC,WAAY,CAACC,cAAQC,iBAAWC,eAChCC,OACE,MAAO,CACLC,SAAU,CACRlC,SAAU,GACVE,SAAU,MAIhBiC,QAAS,CACPC,QAGE9B,EAAQ,CACN+B,OAAQ,OACRC,IAAK,YACLL,KAAMM,KAAKL,WAERM,KAAMf,IACLgB,QAAQC,IAAIjB,EAASQ,MACrBM,KAAKI,OAAOhB,OAAO,eAAgBF,EAASQ,KAAKW,OACjDL,KAAKM,QAAQC,KAAK,CAAClB,KAAM,WAE1BmB,MAAOzB,IACNmB,QAAQC,IAAIpB,Q,iCEhDxB,MAAM0B,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,kCCTf","file":"js/chunk-ff08c3c4.2f29cfea.js","sourcesContent":["<template>\r\n  <Layout>\r\n    <div class=\"login\">\r\n      <div class=\"login__input-wrap\">\r\n        <InputWrap\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            v-model=\"formData.username\"\r\n        />\r\n      </div>\r\n      <div class=\"login__input-wrap\">\r\n        <InputWrap\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            v-model=\"formData.password\"\r\n        />\r\n      </div>\r\n      <Button @click=\"login\">Войти</Button>\r\n    </div>\r\n  </Layout>\r\n</template>\r\n\r\n<script>\r\nimport Layout from \"../components/Layout\";\r\nimport InputWrap from \"../components/ui/InputWrap\";\r\nimport Button from \"../components/ui/Button\";\r\nimport axios from \"axios\";\r\nimport backend from \"../api/backend\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components: {Button, InputWrap, Layout},\r\n  data() {\r\n    return {\r\n      formData: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    login() {\r\n      // this.$store.commit('setUserToken', 'a')\r\n      // this.$store.commit('killUser')\r\n      backend({\r\n        method: 'post',\r\n        url: '/api/auth',\r\n        data: this.formData,\r\n      })\r\n          .then((response) => {\r\n            console.log(response.data);\r\n            this.$store.commit('setUserToken', response.data.token)\r\n            this.$router.push({name: 'Home'})\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-content: center;\r\n  justify-content: center;\r\n\r\n  &__input-wrap {\r\n    margin-bottom: 20px;\r\n    border: 1px solid;\r\n  }\r\n}\r\n</style>\r\n","import axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nconst backend = axios.create({\r\n  baseURL: `http://localhost:3000`,\r\n  timeout: 20000,\r\n  headers: {\r\n    Accept: \"application/json\",\r\n  },\r\n});\r\n\r\nbackend.interceptors.request.use(\r\n  (config) => {\r\n    config.headers.common = {\r\n      ...config.headers.common,\r\n      Authorization: `Bearer ${store.state.userToken}`,\r\n    };\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nbackend.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    if (error.response.status === 401) store.commit(\"user/killUser\");\r\n    throw error;\r\n  }\r\n);\r\n\r\nexport default backend;\r\n","import { render } from \"./Login.vue?vue&type=template&id=ed2a4706&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=ed2a4706&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Project\\\\Dust\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ed2a4706\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Login.vue?vue&type=style&index=0&id=ed2a4706&lang=scss&scoped=true\""],"sourceRoot":""}